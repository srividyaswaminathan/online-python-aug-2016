<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Joining Objects Algorithm</title>
</head>
<body>
	<h1>Joining Objects Algorithm</h1>
	<h3>Cross-reference various objects and generate objects within lists</h3>
	<h3>Examine 'users' , 'usersHaveBooks' and 'books' in console to see initial objects that were cross-referenced.</h3>
	<h3>Examine console to see output of innerJoin()</h3>
	<div id='output'></div>
	

	<script>
		//##Joining objects ([Solution](JoiningObjects.js))

		// This is an excellent challenge to get you ready for database concepts!

		// ##Your tasks:

		// * Write a function `innerJoin` that uses the three provided arrays to return a new array, where each element is also an array containing three objects, one each pulled from `users`, `books` and `usersHaveBooks`. 

		// Here's the catch: The user object's `id` property **must match** the `user_id` property of the `usersHaveBooks` object, and the book object's `id` property **must match** the `book_id` property of the `usersHaveBooks` object.
		
		var users = [
		  {
			id: 1,
			first_name: 'Johnny',
			last_name: 'Rotten',
			created_at:'2012-12-31 23:59:59',
			updated_at:'2012-12-31 23:59:59'
		  },
		  {
			id: 2,
			first_name: 'Amy',
			last_name: 'Brown',
			created_at:'2012-12-31 23:59:59',
			updated_at:'2012-12-31 23:59:59'
		  },
		  {
			id: 3,
			first_name: 'Alice',
			last_name: 'Roh',
			created_at:'2012-12-31 23:59:59',
			updated_at:'2012-12-31 23:59:59'
		  },

		]

		var usersHaveBooks = [
		  {
		    id:1,
		    user_id:1,
		    book_id:1,
		    created_at:'2012-12-31 23:59:59',
		    updated_at:'2012-12-31 23:59:59'
		  },
		  {
		    id:1,
		    user_id:1,
		    book_id:2,
		    created_at:'2012-12-31 23:59:59',
		    updated_at:'2012-12-31 23:59:59'
		  },
		  {
		    id:1,
		    user_id:1,
		    book_id:3,
		    created_at:'2012-12-31 23:59:59',
		    updated_at:'2012-12-31 23:59:59'
		  },
		  {
		    id:1,
		    user_id:2,
		    book_id:2,
		    created_at:'2012-12-31 23:59:59',
		    updated_at:'2012-12-31 23:59:59'
		  },

		]

		var books = [
		  {
			id: 1,
			book_title: 'Grapes of Wrath',
			book_subject: 'The hard life during the depression',
			created_at:'2012-12-31 23:59:59',
			updated_at:'2012-12-31 23:59:59'
		  },
		  {
			id: 2,
			book_title: 'Metamorphosis',
			book_subject: 'The degradation of humanity, reflected in a single man',
			created_at:'2015-01-12 23:59:59',
			updated_at:'2015-01-12 23:59:59'
		  },
		  {
			id: 3,
			book_title: 'The Coming Plague',
			book_subject: 'Infectious diseases',
			created_at:'2015-01-12 23:59:59',
			updated_at:'2015-01-12 23:59:59'
		  },
		]

		var checkedOut = [];

		function innerJoin(){ // create our function

			for ( var haveBooksIdx = 0; haveBooksIdx < usersHaveBooks.length; haveBooksIdx++ ) {
				var associatedUserID = usersHaveBooks[haveBooksIdx]['user_id'];
				var userFirstName = users[associatedUserID - 1]['first_name']; // Question: 'associatedUserID - 1' why did you use this value?
				var userLastName = users[associatedUserID - 1]['last_name'];
				var userID = users[associatedUserID - 1]['id'];
				var bookTitle = books[usersHaveBooks[haveBooksIdx]['book_id']-1]['book_title'];
				var bookSubject = books[usersHaveBooks[haveBooksIdx]['book_id']-1]['book_subject'];
				var bookID = usersHaveBooks[haveBooksIdx]['book_id'];
				var whenCheckedOut = books[usersHaveBooks[haveBooksIdx]['book_id']-1]['created_at'];
				checkedOut.push([
					var something = { // Question: How can I define the names for these objects?
						book_Currently_Checked_Out: bookTitle,   	
						book_Checked_Out_Subject: bookSubject
					}, 
					{
						book_Checked_Out_ID: bookID, 
						book_Checked_Out_On: whenCheckedOut
					}, 
					{
						book_Checked_Out_By: userID, 
						book_Checked_Out_First_Name: userFirstName, 
						book_Checked_Out_Last_Name: userLastName
					}
				]);
			};

			return checkedOut;

		};

		
	</script>
</body>
</html>